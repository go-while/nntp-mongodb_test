# MongoDB Article Storage Test

This code is a test program for storing Usenet articles in MongoDB using the `mongostorage` package.

The main purpose of this test is to insert articles into the MongoDB collection based on different test cases.


## Prerequisites

Before running the test, make sure you have the following installed:

- Go programming language


## Installation

You can clone this repository and build the test program using the following commands:

```shell
git clone <repository_url>
cd <repository_name>
go build
```


## Usage

To run the test program, execute the compiled binary:

```
./<binary_name>
```

The test program will perform the following steps:

```
1. Load MongoDB storage with the default configurations.
2. Iterate over the specified number of inserts (default: 5000000).
3. For each insert, generate an example article with a unique MessageID and MessageIDHash.
4. Perform different actions based on the specified test case:
   - "no-compression": Insert articles without any compression.
   - "gzip-only": Insert articles with gzip compression.
   - "zlib-only": Insert articles with zlib compression.
   - "delete": Delete existing articles with the given MessageIDHash.
5. Log details for each step, including the raw size of the article, the size after compression (if applicable), and whether the article was inserted successfully.
```

## Test Cases

The test program supports the following test cases:

- "no-compression": Articles are inserted without any compression.
- "gzip-only": Articles are compressed using gzip before insertion.
- "zlib-only": Articles are compressed using zlib before insertion.
- "delete": Existing articles with the given MessageIDHash are deleted.


## Disclaimer

Please note that this test program and the module [https://github.com/go-while/nntp-mongodb-storage](https://github.com/go-while/nntp-mongodb-storage) was mostly generated by an AI language model (OpenAI's GPT-3.5, based on GPT-3) for demonstration purposes.

While efforts have been made to ensure its correctness, it is always recommended to review and validate the code before using it in production environments.


# License

This project is licensed under the MIT License - see the [LICENSE](https://choosealicense.com/licenses/mit/) file for details.

## Author
[go-while](https://github.com/go-while)
